<div class="day-title font-bold border-round">
	{{ dia }}
</div>
<div>
	<div *ngFor="let momento of momentosDia">
		<div>
			<div class="day-moment-title flex text-center border-round">
				{{ momento }}
				<p-button
					pTooltip="Agregar alimento"
					tooltipPosition="bottom"
					class="p-button-rounded w-2rem h-2rem inline-flex p-button p-button-icon-only"
					icon="pi pi-plus"
					(click)="buscarProducto(dia, momento)"
				></p-button>
			</div>
		</div>
		<div class="day-item">
			<div *ngFor="let producto of Planificacion?.productos">
				<div
					class="card flex flex-nowrap"
					*ngIf="momento == producto.momento_dia"
					id="{{ producto.id_producto }}-{{
						producto.id_plan_producto
					}}"
				>
					<div
						class="col-1 delete-button flex justify-content-center"
						pTooltip="Eliminar"
						tooltipPosition="bottom"
						(click)="eliminarPlanProducto(producto)"
					>
						<i class="pi pi-times"></i>
					</div>
					<div class="flex flex-wrap col-10">
						<div class="col-10">
							<div>
								{{ producto.cantidad }}
								{{ producto.nombre_unidad }} de
								<span
									class="item-title"
									pTooltip="Ver producto"
									tooltipPosition="top"
									(click)="verProducto(producto)"
									>{{ producto.nombre }}</span
								>
							</div>
						</div>
						<div class="col-2">
							<p-button
								styleClass="p-button-rounded p-button-text p-button-raised"
								icon="pi pi-pencil"
								pTooltip="Editar"
								tooltipPosition="bottom"
								(click)="editarProductoPlan(producto)"
							></p-button>
						</div>
						<div class="col-12">
							Calorías: {{ producto.kcal }} kcal
						</div>
					</div>
					<div class="col-1 checked-button">
						<p-checkbox
							class="inline-flex"
							[(ngModel)]="producto.checked"
							[binary]="true"
							inputId="binary"
							(click)="marcarCheckedPlanProducto(producto)"
						></p-checkbox>
					</div>
				</div>
			</div>
			<div *ngFor="let receta of Planificacion?.preparaciones">
				<div
					class="card flex flex-nowrap delete"
					*ngIf="momento == receta.momento_dia"
					id="{{ receta.id_preparacion }}-{{
						receta.id_plan_preparacion
					}}"
				>
					<div
						class="col-1 delete-button"
						pTooltip="Eliminar"
						tooltipPosition="bottom"
						(click)="eliminarPlanReceta(receta)"
					>
						<i class="pi pi-times"></i>
					</div>
					<div class="col-10 flex flex-wrap no-padding">
						<div class="col-10">
							<div>
								{{ receta.cantidad }}
								porción de
								<span
									class="item-title"
									pTooltip="Ver receta"
									tooltipPosition="top"
									(click)="verReceta(receta)"
									>{{ receta.nombre }}</span
								>
							</div>
						</div>
						<div class="col-2">
							<p-button
								styleClass="p-button-rounded p-button-text p-button-raised"
								icon="pi pi-pencil"
								pTooltip="Editar"
								tooltipPosition="bottom"
								(click)="editarRecetaPlan(receta)"
							></p-button>
						</div>
						<div class="col-12">
							Calorías: {{ receta.kcal }} kcal
						</div>
					</div>
					<div class="col-1 checked-button">
						<p-checkbox
							class="inline-flex"
							[(ngModel)]="receta.checked"
							[binary]="true"
							inputId="binary"
							(click)="marcarCheckedPlanReceta(receta)"
						></p-checkbox>
					</div>
				</div>
			</div>
		</div>
	</div>
	<p-button
		[disabled]="dia != 'Ayer' ? false : true"
		label="Recomendación"
		(click)="obtenerRecomendacion()"
	></p-button>
</div>

<app-dialog-agregar
	*ngIf="mostrarDialog"
	[titulo]="dia"
	[item]="itemEditar"
	[editar]="true"
	[crearReceta]="false"
	[visible]="mostrarDialog"
	(agregarItemPlanEvent)="editarItemPlan($event)"
></app-dialog-agregar>
