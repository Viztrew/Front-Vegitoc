<div class="card">
	<div class="text-center section-title align-items-center">Registro</div>
	<div *ngIf="step == 1">
		<form
			[formGroup]="userForm1"
			class="flex justify-content-center flex-wrap col-12"
		>
			<div class="flex flex-wrap col-12 sm:col-12 md:col-8 xl:col-8">
				<div
					class="col-12 sm:col-4 md:col-4 xl:col-4 flex align-items-center"
				>
					<label for="correo" class="">Correo electónico</label>
				</div>

				<div class="col-12 sm:col-8 md:col-8 xl:col-8">
					<input
						formControlName="correo"
						type="text"
						pInputText
						placeholder="Ej: email@smartplate.cl"
						required
					/>

					<div
						*ngIf="
							userForm1.controls['correo'].invalid &&
							(userForm1.controls['correo'].dirty ||
								userForm1.controls['correo'].touched)
						"
					>
						<div *ngIf="userForm1.controls['correo'].errors">
							<small
								class="p-error block"
								*ngIf="
									userForm1.controls['correo'].errors[
										'required'
									]
								"
							>
								El correo electrónico es obligatorio.
							</small>
							<small
								class="p-error block"
								*ngIf="
									userForm1.controls['correo'].errors['email']
								"
							>
								El correo electrónico no es válido.
							</small>
						</div>
					</div>
				</div>
				<div
					class="col-12 sm:col-4 md:col-4 xl:col-4 flex align-items-center"
				>
					<label for="contrasena" class="text-left">Contraseña</label>
				</div>
				<div class="col-12 sm:col-8 md:col-8 xl:col-8">
					<p-password
						formControlName="contrasena"
						[toggleMask]="true"
						[feedback]="false"
						[ngClass]="
							userForm1.controls['contrasena'].invalid
								? 'ng-invalid ng-dirty'
								: ''
						"
					></p-password>
					<div
						*ngIf="
							userForm1.controls['contrasena'].invalid &&
							(userForm1.controls['contrasena'].dirty ||
								userForm1.controls['contrasena'].touched)
						"
					>
						<div *ngIf="userForm1.controls['contrasena'].errors">
							<small
								class="p-error block"
								*ngIf="userForm1.controls['contrasena'].errors?.['required']"
							>
								La contraseña es obligatoria.
							</small>

							<small
								class="p-error block"
								*ngIf="userForm1.controls['contrasena'].errors?.['minlength']"
							>
								La contraseña debe tener minimo 5 caracteres.
							</small>
							<small
								class="p-error block"
								s
								*ngIf="userForm1.controls['contrasena'].errors?.['maxlength']"
							>
								La contraseña debe tener máximo 25 caracteres.
							</small>
						</div>
					</div>
				</div>
				<div
					class="col-12 sm:col-4 md:col-4 xl:col-4 flex align-items-center"
				>
					<label for="contrasenaRep">Repetir contraseña</label>
				</div>
				<div class="col-12 sm:col-8 md:col-8 xl:col-8">
					<p-password
						formControlName="contrasenaRep"
						[toggleMask]="true"
						[feedback]="false"
						[ngClass]="
							!contrasenasCoinciden() ? 'ng-invalid ng-dirty' : ''
						"
					></p-password>
					<small class="p-error block" *ngIf="!contrasenasCoinciden()"
						>Las contraseñas no coinciden.
					</small>
				</div>
			</div>
		</form>
		<p-button
			[disabled]="userForm1.invalid || !contrasenasCoinciden()"
			(onClick)="revisarCorreo()"
			icon="pi pi-iconName"
			class="flex justify-content-center"
			label="Continuar"
		></p-button>
	</div>

	<div *ngIf="step == 2">
		<form
			[formGroup]="userForm2"
			class="flex justify-content-center flex-wrap col-12"
		>
			<div class="flex flex-wrap col-12 sm:col-12 md:col-8 xl:col-8">
				<div
					class="col-12 sm:col-4 md:col-4 xl:col-4 flex align-items-center"
				>
					<label for="nombreUsuario" class="block"
						>Nombre de usuario</label
					>
				</div>
				<div class="col-12 sm:col-8 md:col-8 xl:col-8">
					<input
						formControlName="nombreUsuario"
						type="text"
						pInputText
						placeholder="Nombre de usuario"
						formControlName="nombreUsuario"
					/>

					<small
						class="p-error block"
						*ngIf="
							userForm2.controls['nombreUsuario'].invalid &&
							(userForm2.controls['nombreUsuario'].dirty ||
								userForm2.controls['nombreUsuario'].touched)
						"
					>
						El nombre de usuario es obligatorio.</small
					>
				</div>
				<div
					class="col-12 sm:col-4 md:col-4 xl:col-4 flex align-items-center"
				>
					<label for="fechaNacimiento" class="block"
						>Fecha de nacimiento</label
					>
				</div>
				<div class="col-12 sm:col-8 md:col-8 xl:col-8">
					<p-calendar
						formControlName="fechaNacimiento"
						type="date"
						formControlName="fechaNacimiento"
						dateFormat="dd.mm.yy"
						[showIcon]="true"
					>
					</p-calendar>
					<div class="flex align-items-start">
						<small
							class="p-error block"
							*ngIf="
								userForm2.controls['fechaNacimiento'].touched &&
								userForm2.controls['fechaNacimiento'].invalid
							"
							>La fecha de nacimiento es obligatoria.
						</small>
						<small
							class="p-error block"
							*ngIf="
								getAge(userForm2.value.fechaNacimiento) > 150
							"
							>Ingrese una fecha valida.
						</small>
						<small
							class="p-error block"
							*ngIf="getAge(userForm2.value.fechaNacimiento) < 18"
							>Debe ser mayor de 18 años.
						</small>
					</div>
				</div>
				<div
					class="col-12 sm:col-4 md:col-4 xl:col-4 flex align-items-center"
				>
					<label for="usuario" class="block">Peso (Kg)</label>
				</div>
				<div class="col-12 sm:col-8 md:col-8 xl:col-8">
					<input
						type="number"
						pInputText
						placeholder="Peso"
						formControlName="peso"
					/>

					<div
						*ngIf="
							userForm2.controls['peso'].invalid &&
							(userForm2.controls['peso'].dirty ||
								userForm2.controls['peso'].touched)
						"
					>
						<small
							*ngIf="userForm2.controls['peso'].errors?.['required']"
							class="p-error block"
							>El peso es obligatorio
						</small>
						<small
							class="p-error block"
							*ngIf="userForm2.controls['peso'].errors?.['min']"
							>El peso mínimo es de 30Kg
						</small>

						<small
							class="p-error block"
							*ngIf="userForm2.controls['peso'].errors?.['max']"
							>El peso máximo es de 300Kg
						</small>
					</div>
				</div>
				<div
					class="col-12 sm:col-4 md:col-4 xl:col-4 flex align-items-center"
				>
					<label for="usuario" class="block">Altura (Cms)</label>
				</div>
				<div class="col-12 sm:col-8 md:col-8 xl:col-8">
					<input
						type="number"
						pInputText
						placeholder="Altura"
						formControlName="altura"
					/>
					<div
						*ngIf="
							userForm2.controls['altura'].invalid &&
							(userForm2.controls['altura'].dirty ||
								userForm2.controls['altura'].touched)
						"
					>
						<small
							*ngIf="userForm2.controls['altura'].errors?.['required']"
							class="p-error block"
							>La altura es obligatoria
						</small>
						<small
							class="p-error block"
							*ngIf="userForm2.controls['altura'].errors?.['min']"
							>La altura mínima es 100Cms
						</small>

						<small
							class="p-error block"
							*ngIf="userForm2.controls['altura'].errors?.['max']"
							>La altura máxima es 300Cms
						</small>
					</div>
				</div>
			</div>
		</form>
		<div class="flex justify-content-center">
			<p-button
				(onClick)="anterior()"
				icon="pi pi-iconName"
				label="Anterior"
				class="mx-2"
			></p-button>
			<p-button
				(onClick)="siguiente()"
				icon="pi pi-iconName"
				label="Continuar"
				[disabled]="userForm2.invalid"
				class="mx-2"
			></p-button>
		</div>
	</div>
	<div *ngIf="step == 3">
		<form>
			<h2 class="boton">Sexo</h2>
			<p-button
				class="boton"
				(onClick)="switchSexo('MASCULINO')"
				[styleClass]="sexo == 'MASCULINO' ? '' : 'p-button-secondary'"
				icon="pi pi-iconName"
				label="Masculino"
			></p-button>
			<p-button
				class="boton"
				(onClick)="switchSexo('FEMENINO')"
				[styleClass]="sexo == 'FEMENINO' ? '' : 'p-button-secondary'"
				icon="pi pi-iconName"
				label="Femenino"
			></p-button>
		</form>
		<div class="flex justify-content-center">
			<p-button
				(onClick)="anterior()"
				icon="pi pi-iconName"
				label="Anterior"
				class="mx-2"
			></p-button>
			<p-button
				(onClick)="siguiente()"
				icon="pi pi-iconName"
				label="Continuar"
				[disabled]="sexo ? false : true"
				class="mx-2"
			></p-button>
		</div>
	</div>
	<div *ngIf="step == 4">
		<form>
			<h2 class="flex justify-content-center">Nivel de actividad</h2>
			<div>
				<p-button
					class="boton"
					(onClick)="switchActividad(1.2)"
					[styleClass]="
						factorActividad == 1.2 ? '' : 'p-button-secondary'
					"
					icon="pi pi-iconName"
					label="Poco o nada"
				></p-button>
				<p-button
					class="boton"
					(onClick)="switchActividad(1.375)"
					[styleClass]="
						factorActividad == 1.375 ? '' : 'p-button-secondary'
					"
					icon="pi pi-iconName"
					label="Moderado"
				></p-button>
				<p-button
					class="boton"
					(onClick)="switchActividad(1.55)"
					[styleClass]="
						factorActividad == 1.55 ? '' : 'p-button-secondary'
					"
					icon="pi pi-iconName"
					label="Alto"
				></p-button>
			</div>
		</form>
		<div class="flex justify-content-center">
			<p-button
				(onClick)="anterior()"
				icon="pi pi-iconName"
				label="Anterior"
				class="mx-2"
			></p-button>
			<p-button
				(onClick)="siguiente()"
				icon="pi pi-iconName"
				label="Continuar"
				[disabled]="factorActividad ? false : true"
				class="mx-2"
			>
			</p-button>
		</div>
	</div>
	<div *ngIf="step == 5">
		<form>
			<h2 class="flex justify-content-center">Objetivo</h2>
			<div>
				<p-button
					class="boton"
					(onClick)="switchObjetivo('SUBIR')"
					[styleClass]="
						objetivo == 'SUBIR' ? '' : 'p-button-secondary'
					"
					icon="pi pi-iconName"
					label="Subir peso"
				></p-button>
				<p-button
					class="boton"
					(onClick)="switchObjetivo('MANTENER')"
					[styleClass]="
						objetivo == 'MANTENER' ? '' : 'p-button-secondary'
					"
					icon="pi pi-iconName"
					label="Mantener peso"
				></p-button>
				<p-button
					class="boton"
					(onClick)="switchObjetivo('BAJAR')"
					[styleClass]="
						objetivo == 'BAJAR' ? '' : 'p-button-secondary'
					"
					icon="pi pi-iconName"
					label="Bajar peso"
				></p-button>

				<div class="flex justify-content-center pb-0">
					<p class="text-xl pb-0 mb-0">Target de calorias</p>
				</div>
				<div class="flex justify-content-center pt-0 mt-0 mb-3">
					<div>
						<input
							type="number"
							pInputText
							[(ngModel)]="target"
							name="target"
							(ngModelChange)="reasignarObjetivo($event)"
							class="mt-3"
						/>
						<div *ngIf="target <= 500 && mostrarMensaje">
							<small class="p-error block"
								>El target es obligatorio y debe ser mayor a 500
							</small>
						</div>
					</div>
				</div>
			</div>
		</form>
		<div class="flex justify-content-center">
			<p-button
				(onClick)="anterior()"
				icon="pi pi-iconName"
				label="Anterior"
			></p-button>
			<p-button
				(onClick)="siguiente()"
				icon="pi pi-iconName"
				label="Continuar"
				*ngIf="step != 5"
				[disabled]="objetivo ? false : true"
				class="mx-2"
			>
			</p-button>
			<p-button
				(onClick)="enviar()"
				*ngIf="step == 5"
				icon="pi pi-iconName"
				label="Finalizar"
				[disabled]="target <= 500 ? true : false"
				class="mx-2"
			></p-button>
		</div>
	</div>
</div>
